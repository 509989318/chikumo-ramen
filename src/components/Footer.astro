---
import type { Lang } from '../i18n/translations';
import { getNav, langNames, t } from '../i18n/translations';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const nav = getNav(lang);
const allLangs: Lang[] = ['ja-jp', 'zh-tw', 'en-us'];
---

<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-logo">
      <img src="/images/footer-logo-text.png" alt="RAMEN CHIKUMO" />
    </div>
    <nav class="footer-nav">
      <ul>
        {nav.map((item) => (
          <li>
            <a
              href={item.href}
              {...(item.external ? { target: '_blank', rel: 'noopener noreferrer' } : {})}
            >
              {item.label}
            </a>
          </li>
        ))}
        <li class="footer-lang">
          <button class="footer-lang-btn">
            {langNames[lang]}
            <svg width="10" height="6" viewBox="0 0 10 6" fill="none">
              <path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5"/>
            </svg>
          </button>
          <ul class="footer-lang-dropdown">
            {allLangs.filter(l => l !== lang).map(l => (
              <li><a href={`/${l}/`}>{langNames[l]}</a></li>
            ))}
          </ul>
        </li>
      </ul>
    </nav>
    <p class="copyright">{t(lang, 'copyright')}</p>
  </div>
</footer>

<style>
  .site-footer {
    background: var(--color-white);
    padding: 60px 30px 30px;
    border-top: 1px solid var(--color-border);
  }

  .footer-inner {
    max-width: 1140px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 24px;
  }

  .footer-logo img {
    height: 40px;
    width: auto;
  }

  .footer-nav ul {
    display: flex;
    align-items: center;
    gap: 0;
    flex-wrap: wrap;
    justify-content: center;
  }

  .footer-nav a, .footer-lang-btn {
    font-family: var(--font-secondary);
    font-size: 11px;
    font-weight: 400;
    letter-spacing: 1px;
    padding: 6px 14px;
    transition: opacity 0.3s;
  }

  .footer-nav a:hover {
    opacity: 0.6;
  }

  .footer-lang {
    position: relative;
  }

  .footer-lang-btn {
    display: flex;
    align-items: center;
    gap: 4px;
    background: none;
    border: none;
    cursor: pointer;
    color: inherit;
  }

  .footer-lang-dropdown {
    display: none;
    position: absolute;
    bottom: 100%;
    left: 0;
    background: white;
    border: 1px solid var(--color-border);
    min-width: 60px;
  }

  .footer-lang:hover .footer-lang-dropdown {
    display: block;
  }

  .footer-lang-dropdown a {
    display: block;
    padding: 6px 12px;
    font-size: 11px;
  }

  .copyright {
    font-family: var(--font-secondary);
    font-size: 11px;
    color: var(--color-text);
    letter-spacing: 1px;
  }

  @media (max-width: 768px) {
    .footer-nav ul {
      flex-direction: column;
      gap: 4px;
    }
  }
</style>
